# 課金画面 UI 実装プラン

## Context
Vision Board アプリにサブスクリプション管理の4画面を実装する。penファイルのデザインを忠実に再現し、Settings画面やProfile画面のPREMIUMロックから遷移できるようにする。課金ロジックはモックデータで対応し、後日RevenueCat等を統合予定。

## 実装ファイル一覧

### 新規作成（5ファイル）
1. **`app/(main)/subscription/pricing.tsx`** — 価格表示・プラン選択画面
2. **`app/(main)/subscription/plan.tsx`** — プラン管理画面（現在のプラン・有効機能表示）
3. **`app/(main)/subscription/cancel.tsx`** — 解約確認画面
4. **`app/(main)/subscription/_layout.tsx`** — subscriptionグループのStack設定
5. **`components/subscription/SubscriptionSuccessModal.tsx`** — 成功ポップアップ（Modal）

### 修正（3ファイル）
6. **`app/(main)/_layout.tsx`** — subscriptionスクリーングループをStackに追加
7. **`app/(main)/settings.tsx`** — 「サブスクリプションを管理」ボタンの遷移先を変更
8. **`app/(main)/(tabs)/profile.tsx`** — PREMIUMロックタップでpricing画面へ遷移

---

## 画面詳細

### 1. Pricing画面 (`subscription/pricing.tsx`)
- TopBar: 左「<」戻るボタン、中央「Pro機能のロック解除」
- バリュープロップ: 3つの機能紹介（金色ボーダー、背景 #1F1F1F、角丸16）
- プランカード3種:
  - 1ヶ月 ¥800（シンプル、背景 #1F1F1F、border #3A3A3A）
  - **3ヶ月 ¥1,440**（推奨: 紫グラデーション、ピンク枠線 #F72585、シャドウ）
  - 12ヶ月 ¥6,400（背景 #1F1F1F、半透明ボーダー）
- CTA: 「3ヶ月プランを開始（初回¥1,440）」LinearGradient ボタン
- サブテキスト: 「いつでもキャンセル可能」
- **プラン選択 → モック購入 → SuccessModal表示**

### 2. SubscriptionSuccessModal（モーダルコンポーネント）
- オーバーレイ: #00000099
- カード: グラデーション背景、金色ボーダー、角丸24
- 王冠アイコン（gold circle）+ スパークル装飾
- タイトル: 「Proメンバーへようこそ！」(#FFD700)
- 機能リスト4項目 + CTAボタン + 閉じるボタン

### 3. Plan Management画面 (`subscription/plan.tsx`)
- StatusBar + TopBar「プランの管理」
- 現在のプランカード（Pro 3ヶ月プラン、有効バッジ、価格、更新日）
- 有効な機能リスト（4項目、チェックマーク付き）
- 2ボタン: 「プランを変更」(outline) / 「プランを解約」(destructive outline)

### 4. Cancel画面 (`subscription/cancel.tsx`)
- TopBar「プランの解約」
- 現在のプランカード（簡易版）
- 「解約後に利用できなくなる機能」リスト（赤系注意色）
- 情報ボックス（利用期間説明）
- 2ボタン: 「プランを継続する」(白背景) / 「解約する」(destructive outline)
- フッター: サポート案内テキスト

---

## ナビゲーション配線

```
Settings → 「サブスクリプションを管理」
  ├── (未課金) → subscription/pricing
  └── (課金済) → subscription/plan
              ├── 「プランを変更」→ subscription/pricing
              └── 「プランを解約」→ subscription/cancel
                  ├── 「プランを継続」→ router.back()
                  └── 「解約する」→ Alert確認 → router.back()

Profile → PREMIUM ロックタップ → subscription/pricing
```

※ 現時点ではモックなので、常に未課金状態として pricing に遷移する

---

## 技術方針
- **既存パターン踏襲**: TopBar, ScrollView, LinearGradient, useSafeAreaInsets, expo-router の `router.push/back`
- **スタイリング**: NativeWind className + style属性のハイブリッド（既存画面と同じ）
- **背景色**: #121212（全画面統一）
- **フォント**: System default（Inter不要、既存と同じ）
- **アイコン**: lucide-react-native（Crown, Infinity, Eye, Globe, Image, Shield, Monitor, LayoutGrid 等）
- **アニメーション**: Modal は React Native Modal + Animated.View で FadeIn
- **モックデータ**: 選択中プラン・機能リストはハードコードで定義

## 検証方法
- Expo Go でアプリ起動
- Settings → サブスクリプション管理 → pricing画面表示
- プラン選択 → 成功モーダル表示 → 閉じる
- Profile → PREMIUMロック → pricing画面遷移
